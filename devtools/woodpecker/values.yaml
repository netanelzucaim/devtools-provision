# Custom values for Woodpecker CI Helm chart - Portable Configuration
# Works on any network using port-forward to localhost:9000

# SECURITY WARNING: The WOODPECKER_AGENT_SECRET below is set to a default value
# for demonstration purposes. For production use, you MUST change this to a secure,
# randomly generated secret. Generate one with: openssl rand -hex 32

server:
  image:
    repository: woodpeckerci/woodpecker-server
    tag: v2.7.0
    pullPolicy: IfNotPresent
  
  replicas: 1
  
  env:
    WOODPECKER_HOST: http://localhost:9000
    WOODPECKER_ADMIN: netanelzucaim  # CHANGE THIS to your GitHub username
    WOODPECKER_OPEN: "false"
    WOODPECKER_AGENT_SECRET: changeme  # CHANGE THIS! Generate with: openssl rand -hex 32
    # GitHub OAuth Configuration
    WOODPECKER_GITHUB: "true"
    WOODPECKER_GITHUB_CLIENT: "Iv23liseFiOKeDH5ktZy"  # Get from GitHub OAuth App settings
    WOODPECKER_GITHUB_SECRET: "14865a2a71597e427432b67e48c4251874687e4f"  # Get from GitHub OAuth App settings
  
  service:
    type: ClusterIP
    port: 8000
    httpPort: 8000
    grpcPort: 9000
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  
  persistence:
    enabled: true
    size: 10Gi
    storageClass: standard
    accessMode: ReadWriteOnce

agent:
  enabled: true
  replicaCount: 2
  
  image:
    repository: woodpeckerci/woodpecker-agent
    tag: v2.7.0
    pullPolicy: IfNotPresent
  
  env:
    WOODPECKER_SERVER: woodpecker-server:9000
    WOODPECKER_AGENT_SECRET: changeme  # MUST match server secret! Change both!
  
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 100m
      memory: 128Mi
